<!DOCTYPE html>
<html lang="fr" dir="ltr">

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="/css/materialize.css">
  <link rel="stylesheet" href="/css/style.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <title>Tests</title>
</head>

<body>
  <nav class="navmargin">
    <div class="nav-wrapper">
      <ul id="nav-mobile" class="left hide-on-med-and-down">
        <li>
          <% if(typeof project != 'undefined') { %>
          <a href="/user/<%= user %>/projects/<%= project.id %>">
            <i class="material-icons left">keyboard_backspace</i>Retour au projet</a></li>

      </ul>
      <a href="/" class="brand-logo center">Gestion projets</a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li><a>Bienvenue <%= user %></a></li>
        <li><a href="/logout">Déconnexion</a></li>
      </ul>
    </div>
    <%}%>
    </nav>
        <div class="container">
          <div class="col s8">
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nom</th>
                  <th>Résultat Attendu</th>
                  <th>Résultat obtenu</th>
                  <th>Niveau</th>
                  <th>Etat</th>
                </tr>
              </thead>
              <tbody>
                <% if(typeof tests != 'undefined') { %>
                  <% tests.forEach(function(test) { if(test != null){%>
                    <div class="row">
                      <tr>
                        <td><p><%= test.num %></p></td>
                        <td><%= test.name %></td>
                        <td><%= test.expectedResult %></td>
                        <td><%= test.obtainedResult %></td>
                        <td><%= test.level %></td>
                        <% let state_color = "red-text accent-4";
                        let state_icon = "sentiment_very_dissatisfied";
                        if(test.obtainedResult == '') {
                          state_color = "orange-text";
                          state_icon = "sentiment_neutral";
                        }
                        else if(test.expectedResult == test.obtainedResult){
                          state_color = "green-text";
                          state_icon = "sentiment_very_satisfied";
                        }%>
                        <td><i class="material-icons left <%= state_color %>"><%= state_icon %></i></td>

                        <td> <p><a href="/user/<%= user %>/projects/<%= project.id %>/tests/<%= test._id %>/update" class="center-align"><i class="material-icons left">edit</i></a></p>
                          <p><a href="/user/<%= user %>/projects/<%= project.id %>/tests/<%= test._id %>/delete" class="materialize-red-text"><i class="material-icons left">delete_forever</i></a></p></td>
                        </tr>
                        <% }}); %>

                      </tbody>
                    </table>
                    <% } %>

                  </div>
                  <div class="col s4">
                    <div class="cardmargin">
                      <a href="/user/<%= user %>/projects/<%= project.id %>/addTest" class="waves-effect waves-light btn btn-large"><i
                        class="material-icons left">add</i>Nouveau Test</a>
                      </div>
                    </div>
                  </div>

                </body>

                </html>
